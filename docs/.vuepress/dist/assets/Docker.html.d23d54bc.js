import{r,o as p,c as t,a as s,b as o,F as c,e as a,d as n}from"./app.b66e79f4.js";import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";var l="/goblog/images/Golang/Docker\u5B9E\u8DF5.png";const d={},u=a('<h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h1><p><strong>docker\u4ED3\u5E93</strong> https://hub.docker.com/</p><p><strong>\u7406\u8BBA\u652F\u6491</strong> Docker\u5B9E\u8DF5(\u7B2C2\u7248)</p><p><img src="'+l+`" alt="Docker\u5B9E\u8DF5"></p><h2 id="\u547D\u4EE4\u884C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u547D\u4EE4\u884C\u4F7F\u7528" aria-hidden="true">#</a> \u547D\u4EE4\u884C\u4F7F\u7528</h2><h3 id="commit" tabindex="-1"><a class="header-anchor" href="#commit" aria-hidden="true">#</a> commit</h3><p>\u5C06\u5F53\u524D\u7684\u5BB9\u5668\u521B\u5EFA\u4E3A\u4E00\u4E2A\u955C\u50CF</p><h2 id="\u5E38\u89C1\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5E38\u89C1\u95EE\u9898" aria-hidden="true">#</a> \u5E38\u89C1\u95EE\u9898</h2><h3 id="\u5BB9\u5668\u4E92\u76F8\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#\u5BB9\u5668\u4E92\u76F8\u8BBF\u95EE" aria-hidden="true">#</a> \u5BB9\u5668\u4E92\u76F8\u8BBF\u95EE</h3><p><strong>\u53C2\u8003\u535A\u5BA2</strong> https://www.cnblogs.com/shenh/p/9714547.html</p><p>server\u5BB9\u5668\u9700\u8981\u8C03\u7528grpc\u5BB9\u5668\u670D\u52A1\u4EE5\u6267\u884C\u7528\u6237\u4E0A\u4F20\u7684\u4EE3\u7801\uFF0C\u8BBF\u95EE\u5730\u5740\u662F&quot;&lt;\u5BB9\u5668\u540D\u79F0&gt;:&lt;\u670D\u52A1\u7AEF\u53E3\u53F7&gt;&quot;\u3002</p><p>\u5728django admin pro\u9879\u76EE\u4E2D, \u5BB9\u5668\u540D\u79F0\u5DF2\u5728 <code>docker-compose.yml</code> \u5B9A\u4E49\u597D</p><p><code>/server/helper/grpc/client.py</code></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">BaeGrpcClient</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> address<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> settings<span class="token punctuation">.</span>GRPC_ADDRESS<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>address <span class="token operator">=</span> address
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>/server/django_admin_pro/settings/prod.py</code></p><p>.. code-block:: python</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token comment"># grpc\u5BB9\u5668\u8BBF\u95EE\u5730\u5740</span>
GRPC_ADDRESS <span class="token operator">=</span> <span class="token string">&quot;grpc:50051&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u89E3\u51B3apt-get-pip\u4E0B\u8F7D\u5F88\u6162\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3apt-get-pip\u4E0B\u8F7D\u5F88\u6162\u7684\u95EE\u9898" aria-hidden="true">#</a> \u89E3\u51B3apt-get/pip\u4E0B\u8F7D\u5F88\u6162\u7684\u95EE\u9898</h3><p>\u66F4\u6362\u56FD\u5185\u6E90\uFF0C\u5982\u679C\u57FA\u4E8Eubuntu\u7684\u955C\u50CF</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># syntax=docker/dockerfile:1</span>
<span class="token instruction"><span class="token keyword">FROM</span> ubuntu:20.04</span>

<span class="token instruction"><span class="token keyword">RUN</span> sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    apt-get clean &amp;&amp; <span class="token operator">\\</span>
    apt-get update &amp;&amp; <span class="token operator">\\</span>
    apt-get upgrade -y &amp;&amp; <span class="token operator">\\</span>
    apt-get install -y --no-install-recommends <span class="token operator">\\</span>
    curl <span class="token operator">\\</span>
    vim</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5982\u679C\u662Fpython\u6216\u8005go</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># syntax=docker/dockerfile:1</span>
<span class="token instruction"><span class="token keyword">FROM</span> python:3.10.2-bullseye</span>

<span class="token comment"># \u5B89\u88C5\u65B9\u4FBF\u8C03\u8BD5\u7684\u5DE5\u5177</span>
<span class="token instruction"><span class="token keyword">RUN</span> sed -i <span class="token string">&#39;s/deb.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    sed -i <span class="token string">&#39;s/security.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    sed -i <span class="token string">&#39;s/security-cdn.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    apt-get clean &amp;&amp; <span class="token operator">\\</span>
    apt-get update &amp;&amp; <span class="token operator">\\</span>
    apt-get upgrade -y &amp;&amp; <span class="token operator">\\</span>
    apt-get install -y --no-install-recommends <span class="token operator">\\</span>
    curl <span class="token operator">\\</span>
    vim</span>

<span class="token comment"># pip\u66F4\u6362\u56FD\u5185\u6E90</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip3 config set global.index-url https://mirrors.aliyun.com/pypi/simple <span class="token operator">\\</span>
    &amp;&amp; pip3 config set install.trusted-host mirrors.aliyun.com</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="\u5728\u5BB9\u5668\u8FD0\u884C\u56FE\u5F62\u5316\u8F6F\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5728\u5BB9\u5668\u8FD0\u884C\u56FE\u5F62\u5316\u8F6F\u4EF6" aria-hidden="true">#</a> \u5728\u5BB9\u5668\u8FD0\u884C\u56FE\u5F62\u5316\u8F6F\u4EF6</h3><blockquote><p>Docker\u5B9E\u8DF5(\u7B2C2\u7248) \u6280\u5DE729 \u5728Docker\u91CC\u8FD0\u884CGUI</p></blockquote><p>\u5206\u4E24\u79CD\u573A\u666F</p><p><strong>\u5728\u672C\u5730Linux\u542F\u52A8docker\u7684GUI</strong></p>`,26),m=n("\u4EE5 "),b={href:"https://coreemu.github.io/core/",target:"_blank",rel:"noopener noreferrer"},h=n("core"),k=n(" \u4E3A\u4F8B\uFF0C\u542F\u52A8\u5BB9\u5668\u7684\u547D\u4EE4"),g=a(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo docker run -itd --name core -e DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix:rw --privileged core
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD9\u91CC\u4ECE\u4E3B\u673A\u6302\u8F7D\u4E86X11\u56FE\u5F62\u5316\u8F6F\u4EF6\uFF0CGUI\u9700\u8981\u7684\u73AF\u5883\u53D8\u91CF: DISPLAY</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>DISPLAY\u662F\u663E\u793A\u5668\u540D\u79F0</p></div><p><strong>\u672C\u5730\u8FDC\u7A0B\u670D\u52A1\u5668\u542F\u52A8docker\u7684GUI</strong></p><p>\u5148\u4E0B\u8F7DXming, \u7136\u540E\u53C2\u8003\u535A\u5BA2 https://blog.csdn.net/ywxuan/article/details/118462658</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -itd --name core --net=host -e DISPLAY -v $HOME/.Xauthority:/root/.Xauthority -v /opt/core:/opt/core --privileged core
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5173\u952E\u53C2\u6570: --net=host -e DISPLAY -v $HOME/.Xauthority:/root/.Xauthority</p><h3 id="\u5BF9\u5DF2\u542F\u52A8\u7684\u5BB9\u5668\u4FEE\u6539\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5BF9\u5DF2\u542F\u52A8\u7684\u5BB9\u5668\u4FEE\u6539\u7AEF\u53E3" aria-hidden="true">#</a> \u5BF9\u5DF2\u542F\u52A8\u7684\u5BB9\u5668\u4FEE\u6539\u7AEF\u53E3</h3><p>https://www.cnblogs.com/fps2tao/p/10557257.html</p><h3 id="docker-run\u7684volume" tabindex="-1"><a class="header-anchor" href="#docker-run\u7684volume" aria-hidden="true">#</a> docker run\u7684volume</h3><p>\u4E0D\u6307\u5B9A-v\u53C2\u6570\u65F6\uFF0C\u9ED8\u8BA4\u653E\u5230 <code>/var/lib/docker/{dir}</code> \u8DEF\u5F84\u4E0B, \u4F8B\u5982</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -v db:/opt/db im
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u7B49\u4EF7\u4E8E <code>-v /var/lib/docker/db:/opt/db</code></p><p>\u6CE8\u610F, wsl\u662F\u770B\u4E0D\u5230 <code>/var/lib/docker</code> \u76EE\u5F55\u7684\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u7EDD\u5BF9\u8DEF\u5F84</p><h3 id="\u672C\u5730\u8FDC\u7A0B\u8FDE\u63A5\u670D\u52A1\u5668\u7684\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#\u672C\u5730\u8FDC\u7A0B\u8FDE\u63A5\u670D\u52A1\u5668\u7684\u5BB9\u5668" aria-hidden="true">#</a> \u672C\u5730\u8FDC\u7A0B\u8FDE\u63A5\u670D\u52A1\u5668\u7684\u5BB9\u5668</h3><p>https://www.cnblogs.com/jesse131/p/13543308.html</p><p>\u6B65\u9AA4\u6E05\u5355</p><ul><li>docker\u5B89\u88C5ssh\u670D\u52A1</li><li>\u4FEE\u6539ssh\u914D\u7F6E\u6587\u4EF6\uFF0C\u5141\u8BB8\u8FDC\u7A0B\u8FDE\u63A5</li><li>\u672C\u5730\u751F\u6210\u516C\u94A5\uFF0C\u5C06\u6587\u672C\u590D\u5236\u5230\u5BB9\u5668\u4E2D</li><li>\u5C06\u5BB9\u5668\u63D0\u4EA4\u5230\u65B0\u7684\u955C\u50CF\uFF0C\u91CD\u65B0\u8FD0\u884C\u5BB9\u5668\uFF0C\u66B4\u973222\u7AEF\u53E3</li><li>\u963F\u91CC\u4E91\u5F00\u653E\u66B4\u9732\u7684\u7AEF\u53E3</li><li>\u672C\u5730\u6D4B\u8BD5\u8FDE\u63A5: ssh root@{host} -p 221</li></ul><h3 id="\u67E5\u770B\u542F\u52A8\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u542F\u52A8\u53C2\u6570" aria-hidden="true">#</a> \u67E5\u770B\u542F\u52A8\u53C2\u6570</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pip install runlike
runlike \u5BB9\u5668\u540D\u79F0
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u6E90\u7801" tabindex="-1"><a class="header-anchor" href="#\u6E90\u7801" aria-hidden="true">#</a> \u6E90\u7801</h2><p>docker: https://github.com/moby/moby</p>`,22);function v(x,y){const e=r("ExternalLinkIcon");return p(),t(c,null,[u,s("p",null,[m,s("a",b,[h,o(e)]),k]),g],64)}var w=i(d,[["render",v]]);export{w as default};
