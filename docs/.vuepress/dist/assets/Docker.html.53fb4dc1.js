import{r,o as t,c as p,a as e,b as o,F as i,e as n,d as s}from"./app.7f7dcb4b.js";import{_ as l}from"./plugin-vue_export-helper.21dcd24c.js";var c="/goblog/images/Golang/Docker\u5B9E\u8DF5.png";const d={},u=n('<h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h1><p><strong>docker\u4ED3\u5E93</strong> https://hub.docker.com/</p><p><strong>\u7406\u8BBA\u652F\u6491</strong> Docker\u5B9E\u8DF5(\u7B2C2\u7248)</p><p><img src="'+c+`" alt="Docker\u5B9E\u8DF5"></p><h2 id="\u547D\u4EE4\u884C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u547D\u4EE4\u884C\u4F7F\u7528" aria-hidden="true">#</a> \u547D\u4EE4\u884C\u4F7F\u7528</h2><h3 id="commit" tabindex="-1"><a class="header-anchor" href="#commit" aria-hidden="true">#</a> commit</h3><p>\u5C06\u5F53\u524D\u7684\u5BB9\u5668\u521B\u5EFA\u4E3A\u4E00\u4E2A\u955C\u50CF</p><h2 id="\u5E38\u89C1\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5E38\u89C1\u95EE\u9898" aria-hidden="true">#</a> \u5E38\u89C1\u95EE\u9898</h2><h3 id="\u5BB9\u5668\u4E92\u76F8\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#\u5BB9\u5668\u4E92\u76F8\u8BBF\u95EE" aria-hidden="true">#</a> \u5BB9\u5668\u4E92\u76F8\u8BBF\u95EE</h3><p><strong>\u53C2\u8003\u535A\u5BA2</strong> https://www.cnblogs.com/shenh/p/9714547.html</p><p>server\u5BB9\u5668\u9700\u8981\u8C03\u7528grpc\u5BB9\u5668\u670D\u52A1\u4EE5\u6267\u884C\u7528\u6237\u4E0A\u4F20\u7684\u4EE3\u7801\uFF0C\u8BBF\u95EE\u5730\u5740\u662F&quot;&lt;\u5BB9\u5668\u540D\u79F0&gt;:&lt;\u670D\u52A1\u7AEF\u53E3\u53F7&gt;&quot;\u3002</p><p>\u5728django admin pro\u9879\u76EE\u4E2D, \u5BB9\u5668\u540D\u79F0\u5DF2\u5728 <code>docker-compose.yml</code> \u5B9A\u4E49\u597D</p><p><code>/server/helper/grpc/client.py</code></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">BaeGrpcClient</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> address<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> settings<span class="token punctuation">.</span>GRPC_ADDRESS<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>address <span class="token operator">=</span> address
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>/server/django_admin_pro/settings/prod.py</code></p><p>.. code-block:: python</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token comment"># grpc\u5BB9\u5668\u8BBF\u95EE\u5730\u5740</span>
GRPC_ADDRESS <span class="token operator">=</span> <span class="token string">&quot;grpc:50051&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u89E3\u51B3apt-get-pip\u4E0B\u8F7D\u5F88\u6162\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3apt-get-pip\u4E0B\u8F7D\u5F88\u6162\u7684\u95EE\u9898" aria-hidden="true">#</a> \u89E3\u51B3apt-get/pip\u4E0B\u8F7D\u5F88\u6162\u7684\u95EE\u9898</h3><p>\u66F4\u6362\u56FD\u5185\u6E90\uFF0C\u5982\u679C\u57FA\u4E8Eubuntu\u7684\u955C\u50CF</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># syntax=docker/dockerfile:1</span>
<span class="token instruction"><span class="token keyword">FROM</span> ubuntu:20.04</span>

<span class="token instruction"><span class="token keyword">RUN</span> sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    apt-get clean &amp;&amp; <span class="token operator">\\</span>
    apt-get update &amp;&amp; <span class="token operator">\\</span>
    apt-get upgrade -y &amp;&amp; <span class="token operator">\\</span>
    apt-get install -y --no-install-recommends <span class="token operator">\\</span>
    curl <span class="token operator">\\</span>
    vim</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5982\u679C\u662Fpython\u6216\u8005go</p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># syntax=docker/dockerfile:1</span>
<span class="token instruction"><span class="token keyword">FROM</span> python:3.10.2-bullseye</span>

<span class="token comment"># \u5B89\u88C5\u65B9\u4FBF\u8C03\u8BD5\u7684\u5DE5\u5177</span>
<span class="token instruction"><span class="token keyword">RUN</span> sed -i <span class="token string">&#39;s/deb.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    sed -i <span class="token string">&#39;s/security.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    sed -i <span class="token string">&#39;s/security-cdn.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
    apt-get clean &amp;&amp; <span class="token operator">\\</span>
    apt-get update &amp;&amp; <span class="token operator">\\</span>
    apt-get upgrade -y &amp;&amp; <span class="token operator">\\</span>
    apt-get install -y --no-install-recommends <span class="token operator">\\</span>
    curl <span class="token operator">\\</span>
    vim</span>

<span class="token comment"># pip\u66F4\u6362\u56FD\u5185\u6E90</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip3 config set global.index-url https://mirrors.aliyun.com/pypi/simple <span class="token operator">\\</span>
    &amp;&amp; pip3 config set install.trusted-host mirrors.aliyun.com</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="\u5728\u5BB9\u5668\u8FD0\u884C\u56FE\u5F62\u5316\u8F6F\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5728\u5BB9\u5668\u8FD0\u884C\u56FE\u5F62\u5316\u8F6F\u4EF6" aria-hidden="true">#</a> \u5728\u5BB9\u5668\u8FD0\u884C\u56FE\u5F62\u5316\u8F6F\u4EF6</h3><p>\u5728\u4E3B\u673A\u5B89\u88C5X11\u8F6F\u4EF6, Centos 7/8</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum -y install xorg-x11-xauth
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>Docker\u5B9E\u8DF5(\u7B2C2\u7248) \u6280\u5DE729 \u5728Docker\u91CC\u8FD0\u884CGUI</p></blockquote><p>\u5206\u4E24\u79CD\u573A\u666F</p><p><strong>\u5728\u672C\u5730Linux\u542F\u52A8docker\u7684GUI</strong></p>`,28),m=s("\u4EE5 "),b={href:"https://coreemu.github.io/core/",target:"_blank",rel:"noopener noreferrer"},h=s("core"),g=s(" \u4E3A\u4F8B\uFF0C\u542F\u52A8\u5BB9\u5668\u7684\u547D\u4EE4"),k=n(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo docker run -itd --name core -e DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix:rw --privileged core
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD9\u91CC\u4ECE\u4E3B\u673A\u6302\u8F7D\u4E86X11\u56FE\u5F62\u5316\u8F6F\u4EF6\uFF0CGUI\u9700\u8981\u7684\u73AF\u5883\u53D8\u91CF: DISPLAY</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>DISPLAY\u662F\u663E\u793A\u5668\u540D\u79F0</p></div><p><strong>\u672C\u5730\u8FDC\u7A0B\u670D\u52A1\u5668\u542F\u52A8docker\u7684GUI(\u4E0D\u63A8\u8350)</strong></p><p>\u5982\u679C\u662FWin\u7CFB\u7EDF\uFF0C\u5148\u4E0B\u8F7DXming, \u7136\u540E\u53C2\u8003\u535A\u5BA2 https://blog.csdn.net/ywxuan/article/details/118462658</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -itd --name core --net=host -e DISPLAY -v $HOME/.Xauthority:/root/.Xauthority -v /tmp/.X11-unix:/tmp/.X11-unix:rw -v /opt/core:/opt/core --privileged core
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5173\u952E\u53C2\u6570: --net=host -e DISPLAY -v $HOME/.Xauthority:/root/.Xauthority -v /tmp/.X11-unix:/tmp/.X11-unix:rw</p><p>\u6CE8\u610F, \u6BCF\u6B21XShell\u91CD\u65B0\u8FDE\u63A5\uFF0C\u90FD\u8981\u91CD\u542F\u5BB9\u5668\uFF0C\u7136\u540E\u8FDB\u5165\u5BB9\u5668\u4FEE\u6539DISPLAY\u7684\u503C\u8DDF\u5BBF\u4E3B\u673A\u7684\u4E00\u81F4\uFF0C\u624D\u80FD\u6253\u5F00\u56FE\u5F62\u5316\u754C\u9762\u8F6F\u4EF6\u3002\u56E0\u4E3A\u8FD9\u4E2A\u8FC7\u7A0B\u633A\u7E41\u7410\u7684\uFF0C\u6240\u4EE5\u4E0D\u63A8\u8350\u8FD9\u79CD\u65B9\u6CD5\u3002</p><p><strong>\u672C\u5730ssh\u76F4\u63A5\u5BB9\u5668\uFF0C\u7136\u540E\u6253\u5F00GUI(\u63A8\u8350)</strong></p><p>#. \u8FD0\u884C\u5BB9\u5668</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run --net=host --name gui image_name
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u6CE8\u610F\uFF0C\u5173\u952E\u53C2\u6570\u53EA\u6709--net=host, \u4E0D\u8981\u6302\u8F7D\u4E3B\u673A\u7684 /.Xauthority \u548C /tmp/.X11-unix ,\u53EF\u80FD\u4F1A\u4EA7\u751F\u51B2\u7A81</p><p>#. \u5BB9\u5668\u542F\u52A8ssh\u670D\u52A1\u5141\u8BB8\u8FDC\u7A0B\u8FDE\u63A5, \u53C2\u8003 <a href="#%E6%9C%AC%E5%9C%B0%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%AE%B9%E5%99%A8">\u672C\u5730\u8FDC\u7A0B\u8FDE\u63A5\u670D\u52A1\u5668\u7684\u5BB9\u5668</a> #. ssh\u8FDE\u63A5\u5BB9\u5668, \u5047\u8BBE\u7AEF\u53E3\u53F7\u4E3A222 <strong>Unix\u7CFB\u7EDF</strong> \u5047\u8BBE\u672C\u673A\u662FUbuntu\u7CFB\u7EDF\uFF0C\u5E76\u4E14\u88C5\u597D\u4E86\u56FE\u5F62\u5316\u8F6F\u4EF6</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ssh -X root@host -p 222
apt-get install xarclock
xarclock 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Win\u7CFB\u7EDF</strong></p><p>\u7528powershell\u8FDE\u63A5\u5230\u5BB9\u5668, \u6253\u5F00powershell\u8BBE\u7F6EDISPLAY</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PS C:\\Users\\39713&gt; setx DISPLAY &quot;localhost:0.0&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u91CD\u542Fpowershell\u8BA9DISPLAY\u751F\u6548, \u8F93\u51FADISPLAY</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PS C:\\Users\\39713&gt; $env:DISPLAY
localhost:0.0
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u6709\u503C\u4EE3\u8868\u8BBE\u7F6E\u6210\u529F</p><p>\u8FDC\u7A0B\u8FDE\u63A5\u5BB9\u5668\u5E76\u6253\u5F00GUI\u8F6F\u4EF6</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PS C:\\Users\\39713&gt; ssh -Y root@host -p 222
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>root@iZwz9ivwxya29whzkf6aejZ:~# apt-get install xarclock
root@iZwz9ivwxya29whzkf6aejZ:~# xarclock 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u6CE8\u610F\uFF0C-X\u662F\u5173\u952E\u53C2\u6570, \u5141\u8BB8X11\u8F6C\u53D1</p><h3 id="\u5BF9\u5DF2\u542F\u52A8\u7684\u5BB9\u5668\u4FEE\u6539\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5BF9\u5DF2\u542F\u52A8\u7684\u5BB9\u5668\u4FEE\u6539\u7AEF\u53E3" aria-hidden="true">#</a> \u5BF9\u5DF2\u542F\u52A8\u7684\u5BB9\u5668\u4FEE\u6539\u7AEF\u53E3</h3><p>https://www.cnblogs.com/fps2tao/p/10557257.html</p><h3 id="docker-run\u7684volume" tabindex="-1"><a class="header-anchor" href="#docker-run\u7684volume" aria-hidden="true">#</a> docker run\u7684volume</h3><p>\u4E0D\u6307\u5B9A-v\u53C2\u6570\u65F6\uFF0C\u9ED8\u8BA4\u653E\u5230 <code>/var/lib/docker/{dir}</code> \u8DEF\u5F84\u4E0B, \u4F8B\u5982</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -v db:/opt/db im
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u7B49\u4EF7\u4E8E <code>-v /var/lib/docker/db:/opt/db</code></p><p>\u6CE8\u610F, wsl\u662F\u770B\u4E0D\u5230 <code>/var/lib/docker</code> \u76EE\u5F55\u7684\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u7EDD\u5BF9\u8DEF\u5F84</p><h3 id="\u672C\u5730\u8FDC\u7A0B\u8FDE\u63A5\u670D\u52A1\u5668\u7684\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#\u672C\u5730\u8FDC\u7A0B\u8FDE\u63A5\u670D\u52A1\u5668\u7684\u5BB9\u5668" aria-hidden="true">#</a> \u672C\u5730\u8FDC\u7A0B\u8FDE\u63A5\u670D\u52A1\u5668\u7684\u5BB9\u5668</h3><p>https://www.cnblogs.com/jesse131/p/13543308.html</p><p>\u6B65\u9AA4\u6E05\u5355</p><p>#. docker\u5B89\u88C5ssh\u670D\u52A1 #. \u4FEE\u6539ssh\u914D\u7F6E\u6587\u4EF6\uFF0C\u5141\u8BB8\u8FDC\u7A0B\u8FDE\u63A5</p><p>\u56E0\u4E3A\u8FD9\u4E9B\u914D\u7F6E\u9ED8\u8BA4\u662F\u6CE8\u91CA\u6389\u7684\uFF0C\u6240\u4EE5\u9664\u4E86\u7528vim\u6253\u5F00\u4FEE\u6539\uFF0C\u4E5F\u53EF\u4EE5\u7528\u8FFD\u52A0\u7684\u65B9\u5F0F\u6DFB\u52A0\u914D\u7F6E</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>echo &quot;UseDNS no&quot; &gt;&gt; /etc/ssh/sshd_config
echo &quot;AddressFamily inet&quot; &gt;&gt; /etc/ssh/sshd_config
echo &quot;SyslogFacility AUTHPRIV&quot; &gt;&gt; /etc/ssh/sshd_config 
echo &quot;PermitRootLogin yes&quot; &gt;&gt; /etc/ssh/sshd_config
echo &quot;PasswordAuthentication yes&quot; &gt;&gt; /etc/ssh/sshd_config
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u4FEE\u6539\u7AEF\u53E3\u53F7(\u53EF\u9009)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># Port 22
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u66F4\u6539\u4E3A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Port 222
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>#. \u91CD\u542Fssh\u670D\u52A1</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/etc/init.d/ssh restart
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>#. \u4FEE\u6539root\u5BC6\u7801</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>passwd
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>#. \u5C06\u5BB9\u5668\u63D0\u4EA4\u5230\u65B0\u7684\u955C\u50CF\uFF0C\u91CD\u65B0\u8FD0\u884C\u5BB9\u5668\uFF0C\u66B4\u973222\u7AEF\u53E3 #. \u963F\u91CC\u4E91\u5F00\u653E\u66B4\u9732\u7684\u7AEF\u53E3 #. \u672C\u5730\u6D4B\u8BD5\u8FDE\u63A5: ssh root@{host} -p 221</p><h3 id="\u67E5\u770B\u542F\u52A8\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u542F\u52A8\u53C2\u6570" aria-hidden="true">#</a> \u67E5\u770B\u542F\u52A8\u53C2\u6570</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pip install runlike
runlike \u5BB9\u5668\u540D\u79F0
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u6E90\u7801" tabindex="-1"><a class="header-anchor" href="#\u6E90\u7801" aria-hidden="true">#</a> \u6E90\u7801</h2><p>docker: https://github.com/moby/moby</p>`,50);function v(x,y){const a=r("ExternalLinkIcon");return t(),p(i,null,[u,e("p",null,[m,e("a",b,[h,o(a)]),g]),k],64)}var w=l(d,[["render",v]]);export{w as default};
