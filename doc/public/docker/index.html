<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.99.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title> &middot; My New Hugo Site</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://paradox-lab.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://paradox-lab.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://paradox-lab.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://paradox-lab.github.io/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://paradox-lab.github.io/"><h1>My New Hugo Site</h1></a>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://paradox-lab.github.io/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2022. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1></h1>
  <time datetime=0001-01-01T00:00:00Z class="post-date">Mon, Jan 1, 0001</time>
  <h1 id="docker">Docker</h1>
<p><strong>docker仓库</strong> <a href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<p><strong>参考书籍</strong> Docker实践(第2版)</p>
<h2 id="常见问题">常见问题</h2>
<h3 id="容器互相访问">容器互相访问</h3>
<p><strong>参考博客</strong> <a href="https://www.cnblogs.com/shenh/p/9714547.html">https://www.cnblogs.com/shenh/p/9714547.html</a></p>
<p>server容器需要调用grpc容器服务以执行用户上传的代码，访问地址是&quot;&lt;容器名称&gt;:&lt;服务端口号&gt;&quot;。</p>
<p>在django admin pro项目中, 容器名称已在 <code>docker-compose.yml</code> 定义好</p>
<p><code>/server/helper/grpc/client.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BaeGrpcClient</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, address: str <span style="color:#f92672">=</span> settings<span style="color:#f92672">.</span>GRPC_ADDRESS):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>address <span style="color:#f92672">=</span> address
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">...</span>
</span></span></code></pre></div><p><code>/server/django_admin_pro/settings/prod.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># grpc容器访问地址</span>
</span></span><span style="display:flex;"><span>GRPC_ADDRESS <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grpc:50051&#34;</span>
</span></span></code></pre></div><h3 id="解决apt-getpip下载很慢的问题">解决apt-get/pip下载很慢的问题</h3>
<p>更换国内源，如果基于ubuntu的镜像</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># syntax=docker/dockerfile:1</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> ubuntu:20.04</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get clean <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get update <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get upgrade -y <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get install -y --no-install-recommends <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    curl <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    vim<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>如果是python或者go</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># syntax=docker/dockerfile:1</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> python:3.10.2-bullseye</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 安装方便调试的工具</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> sed -i <span style="color:#e6db74">&#39;s/deb.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    sed -i <span style="color:#e6db74">&#39;s/security.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    sed -i <span style="color:#e6db74">&#39;s/security-cdn.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get clean <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get update <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get upgrade -y <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get install -y --no-install-recommends <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    curl <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    vim<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># pip更换国内源</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> pip3 config set global.index-url https://mirrors.aliyun.com/pypi/simple <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    <span style="color:#f92672">&amp;&amp;</span> pip3 config set install.trusted-host mirrors.aliyun.com<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h3 id="在容器运行图形化软件">在容器运行图形化软件</h3>
<p>在主机安装X11软件, Centos 7/8</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>yum -y install xorg-x11-xauth
</span></span></code></pre></div><blockquote>
<p>Docker实践(第2版) 技巧29 在Docker里运行GUI</p>
</blockquote>
<p>分两种场景</p>
<p><strong>在本地Linux启动docker的GUI</strong></p>
<p>以 <a href="https://coreemu.github.io/core/">core</a> 为例，启动容器的命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sudo docker run -itd --name core -e DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix:rw --privileged core
</span></span></code></pre></div><p>这里从主机挂载了X11图形化软件，GUI需要的环境变量: DISPLAY</p>
<p>:::tip
DISPLAY是显示器名称
:::</p>
<p><strong>本地远程服务器使用docker exec的GUI(不推荐)</strong></p>
<p>如果是Win系统，先下载Xming, 然后参考博客 <a href="https://blog.csdn.net/ywxuan/article/details/118462658">https://blog.csdn.net/ywxuan/article/details/118462658</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>docker run -itd --name core --net=host -e DISPLAY -v $HOME/.Xauthority:/root/.Xauthority -v /tmp/.X11-unix:/tmp/.X11-unix:rw -v /opt/core:/opt/core --privileged core
</span></span></code></pre></div><p>关键参数: &ndash;net=host -e DISPLAY -v $HOME/.Xauthority:/root/.Xauthority -v /tmp/.X11-unix:/tmp/.X11-unix:rw</p>
<p>注意, 每次XShell重新连接，都要重启容器，然后进入容器修改DISPLAY的值跟宿主机的一致，才能打开图形化界面软件。因为这个过程挺繁琐的，所以不推荐这种方法。</p>
<p><strong>本地ssh直接容器，然后打开GUI(推荐)</strong></p>
<ol>
<li>运行容器</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>docker run --net=host --name gui image_name
</span></span></code></pre></div><p>注意，关键参数只有&ndash;net=host, 不要挂载主机的 /.Xauthority 和 /tmp/.X11-unix ,可能会产生冲突</p>
<ol start="2">
<li>容器启动ssh服务允许远程连接, 参考 <a href="#%E6%9C%AC%E5%9C%B0%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%AE%B9%E5%99%A8">本地远程连接服务器的容器</a></li>
<li>ssh连接容器, 假设端口号为222</li>
</ol>
<p>当然，还有一种情况是服务器没有开放222端口，这时可以先加上-X参数ssh连接服务器, 然后服务器上再用-X参数ssh连接容器, 这样也能达到一样的效果。</p>
<p><strong>Unix系统</strong>
假设本机是Ubuntu系统，并且装好了图形化软件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>ssh -X root@host -p 222
</span></span><span style="display:flex;"><span>apt-get install xarclock
</span></span><span style="display:flex;"><span>xarclock 
</span></span></code></pre></div><p><strong>Win系统</strong></p>
<p>用powershell连接到容器, 打开powershell设置DISPLAY</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>PS C:\Users\39713&gt; setx DISPLAY &#34;localhost:0.0&#34;
</span></span></code></pre></div><p>重启powershell让DISPLAY生效, 输出DISPLAY</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>PS C:\Users\39713&gt; $env:DISPLAY
</span></span><span style="display:flex;"><span>localhost:0.0
</span></span></code></pre></div><p>有值代表设置成功</p>
<p>远程连接容器并打开GUI软件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>PS C:\Users\39713&gt; ssh -Y root@host -p 222
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>root@iZwz9ivwxya29whzkf6aejZ:~# apt-get install xarclock
</span></span><span style="display:flex;"><span>root@iZwz9ivwxya29whzkf6aejZ:~# xarclock 
</span></span></code></pre></div><p>注意，-X是关键参数, 允许X11转发</p>
<h3 id="对已启动的容器修改端口">对已启动的容器修改端口</h3>
<p><a href="https://www.cnblogs.com/fps2tao/p/10557257.html">https://www.cnblogs.com/fps2tao/p/10557257.html</a></p>
<h3 id="docker-run的volume">docker run的volume</h3>
<p>不指定-v参数时，默认放到 <code>/var/lib/docker/{dir}</code> 路径下, 例如</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -v db:/opt/db im
</span></span></code></pre></div><p>等价于 <code>-v /var/lib/docker/db:/opt/db</code></p>
<p>注意, wsl是看不到 <code>/var/lib/docker</code> 目录的，建议使用绝对路径</p>
<h3 id="本地远程连接服务器的容器">本地远程连接服务器的容器</h3>
<p><a href="https://www.cnblogs.com/jesse131/p/13543308.html">https://www.cnblogs.com/jesse131/p/13543308.html</a></p>
<p>步骤清单</p>
<ol>
<li>docker安装ssh服务</li>
<li>修改ssh配置文件，允许远程连接</li>
</ol>
<p>因为这些配置默认是注释掉的，所以除了用vim打开修改，也可以用追加的方式添加配置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>echo &#34;UseDNS no&#34; &gt;&gt; /etc/ssh/sshd_config
</span></span><span style="display:flex;"><span>echo &#34;AddressFamily inet&#34; &gt;&gt; /etc/ssh/sshd_config
</span></span><span style="display:flex;"><span>echo &#34;SyslogFacility AUTHPRIV&#34; &gt;&gt; /etc/ssh/sshd_config 
</span></span><span style="display:flex;"><span>echo &#34;PermitRootLogin yes&#34; &gt;&gt; /etc/ssh/sshd_config
</span></span><span style="display:flex;"><span>echo &#34;PasswordAuthentication yes&#34; &gt;&gt; /etc/ssh/sshd_config
</span></span></code></pre></div><p>修改端口号(可选)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>echo &#34;Port 222&#34; &gt;&gt; /etc/ssh/sshd_config 
</span></span></code></pre></div><ol start="3">
<li>重启ssh服务</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>/etc/init.d/ssh restart
</span></span></code></pre></div><ol start="4">
<li>修改root密码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>passwd
</span></span></code></pre></div><ol start="5">
<li>将容器提交到新的镜像，重新运行容器，暴露22端口</li>
<li>阿里云开放暴露的端口</li>
<li>本地测试连接: ssh root@{host} -p 221</li>
</ol>
<h3 id="本地ssh连接容器">本地ssh连接容器</h3>
<p>配置ssh, 过程参考 <a href="#%E6%9C%AC%E5%9C%B0%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%AE%B9%E5%99%A8">本地远程连接服务器的容器</a></p>
<p>假设暴露端口222, 本地测试连接: ssh root@localhost -p 222</p>
<h3 id="查看启动参数">查看启动参数</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>pip install runlike
</span></span><span style="display:flex;"><span>runlike 容器名称
</span></span></code></pre></div><h3 id="vim从外部粘贴文本">vim从外部粘贴文本</h3>
<p>如果粘贴外部文本显示可视化模式时, 用冒号输入命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>set mouse-=a
</span></span></code></pre></div><p>之后就可以正常使用粘贴了。</p>
<h2 id="docker版本的软件">docker版本的软件</h2>
<h3 id="jenkins">jenkins</h3>
<p><a href="https://www.jenkins.io/zh/doc/book/installing/#docker">https://www.jenkins.io/zh/doc/book/installing/#docker</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># Docker实践(第2版) 技巧66</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> jenkins/jenkins:lts-jdk11</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">USER</span><span style="color:#e6db74"> root</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> rm -rf /etc/localtime<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> sed -i <span style="color:#e6db74">&#39;s/deb.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    sed -i <span style="color:#e6db74">&#39;s/security.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    sed -i <span style="color:#e6db74">&#39;s/security-cdn.debian.org/mirrors.tuna.tsinghua.edu.cn/&#39;</span> /etc/apt/sources.list <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get clean <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get update <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get upgrade -y <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-get install -y --no-install-recommends <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    python3.9 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    python3-pip<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> pip3 config set global.index-url https://mirrors.aliyun.com/pypi/simple <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    pip3 config set install.trusted-host mirrors.aliyun.com <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    pip3 install docker-compose<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>docker run</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>docker run --name jenkins_server -p 8080:8080 -v /var/run/docker.sock:/var/run/docker.sock -v /var/jenkins_home:/var/jenkins_home -v /usr/bin/docker:/usr/bin/docker -d --privileged jenkins_server
</span></span></code></pre></div><h3 id="nginx">nginx</h3>
<p><a href="https://hub.docker.com/_/nginx">https://hub.docker.com/_/nginx</a></p>
<h2 id="源码">源码</h2>
<p>docker: <a href="https://github.com/moby/moby">https://github.com/moby/moby</a></p>

</div>


    </main>

    
      
    
  </body>
</html>
